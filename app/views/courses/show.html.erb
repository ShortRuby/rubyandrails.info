<% noindex %>


<div class="flex flex-col md:flex-row md:gap-10">
  <div class="md:w-3/4 md:border-r md:border-slate-300 md:pr-10">
    <section class="flex flex-col md:flex-row gap-8 md:gap-20 mb-8 lg:mb-20">
      <div class="w-1/2 md:w-1/2 xl:w-1/3 mx-auto">
<% unless @course.cover.nil? || @course.cover.empty? %>

  <div class="relative">
    <% if @course.free %>
      <span class="text-base bg-green-500/80 absolute font-bold text-white px-2 inline-block py-1">Free </span>
    <% end %>
    <%= image_tag("courses/#{@course.cover}", alt: "#{@course.title}", class: "shrink-0 lg:mr-auto  block shadow-xl shadow-slate-800/20 ") %>
  </div>

<% end %>

      </div>

      <div class="flex flex-1 justify-between flex-col items-center text-center">
        <%= link_to "All Courses", courses_path, class: "mb-4 md:inline-block text-red-500" %>

        <h1 class="text-2xl mb-8 lg:mb-8 md:text-4xl max-w-2xl font-custom lg:leading-tight">
          <%= @course.title %>
        </h1> 
          <div class="flex flex-wrap gap-2 justify-center md:justify-start">
            <% if @course.courseSiteUrl.present? %>
              <%= render ButtonComponent.new(title: "Get Course", path: @course.courseSiteUrl, shop: true) %>
            <% end %>
          </div>
      </div>
    </section>

  </div>

  <div class="hidden md:block px-6 ml-auto md:w-1/4 mb-20">
    <div class="mb-8 hidden">
      <h2 class="font-custom hover:text-red-500 mb-2">Author</h2>
      <%= @course.authors.map { |author| link_to(author.name, author, class: "text-red-500 hover:text-red-500") }.join(", ").html_safe %>
    </div>

    <h2 class="font-custom hover:text-red-500 mb-2">You'll learn</h2>
    <div class="flex flex-col">
      <% @course.tags.each do |item| %>
        <div class="">
          <%= link_to item, class: "text-red-500 hover:text-red-600" do %>
            <%= item.title %>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>

</div>

<div class="mb-20">

  <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-10 xl:gap-20 pt-6 md:pt-12 border-t border-slate-300 ">
    <section class="md:col-span-3 grid grid-cols-1 md:grid-cols-3 md:place-items-end md:gap-y-10 md:gap-x-20 lg:gap-x-28">

      <h2 class="md:col-span-1 mb-2 font-custom self-start">About course</h2>
      <div class="place-self-start pr-8 xl:pr-0 max-w-2xl md:col-span-2 mb-8 md:mb-0">
        <%= @course.content %>
      </div>
    </section>
  </div>

</div>


<% if current_user.try(:admin?) %>
  <div class="fixed bottom-10 z-50 right-10 flex gap-10">
    <%= link_to 'Edit', edit_course_path(@course) %>
    <%= button_to 'Delete', @course, method: :delete, style: 'background: tomato' %>
  </div>
<% end %>

