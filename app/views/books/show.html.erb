<%= render(Layout::HeroComponent.new(title: "books", bg_color: "bg-red-700", bg: "book", second: true, path: books_path)) do |c| %>

  <%= c.with_image do %>
    <div class="w-1/2 sm:w-1/3 md:w-1/3 lg:w-2/3 xl:w-1/2">
      <%= render BookCoverComponent.new(book: @book) %> 
    </div>
  <% end %>

  <%= c.with_link do %>
    <div class="lg:self-end">
      <h1 class="text-3xl md:leading-tight md:text-4xl 2xl:text-5xl font-bold md:mb-4">
        <%= @book.title %>
      </h1> 
      <div class="mb-8 xl:text-3xl">
        by <%= @book.authors.map { |author| link_to(author.name, author, class: "hover:opacity-90") }.join(", ").html_safe %>
      </div>
      
      <div class="flex flex-wrap gap-2 mb-8 lg:mb-0 items-start justify-start ">
        <% if @book.getBookOnAmazonUrl.present? %>
          <%= render ButtonComponent.new(title: "Amazon", path: @book.getBookOnAmazonUrl, shop: true) %>
        <% end %>

        <% if @book.getBookOnSiteUrl.present? %>
          <%= render ButtonComponent.new(title: @book.getBookOnSiteTitle, path: @book.getBookOnSiteUrl, shop: true) %>
        <% end %>
      </div>
    </div>

  <% end %>
<% end %>


<div class="grid lg:grid-cols-2 p-5 md:p-10 lg:p-16 lg:gap-20 items-start relative">
  <div class="mb-8">
    <%= @book.content %>
  </div>

  <div class="p-5 md:p-10 lg:p-12 xl:ml-auto 2xl:w-2/3 bg-slate-100 grid grid-cols-2 lg:grid-cols-1 gap-4 xl:gap-10 md:mb-12">
    <section>
      <%= link_to tags_path, class: "mb-4 font-bold inline-block" do %>
        What you'll learn
      <% end %>

      <ul class="space-y-1">
        <% @book.tags.each do |item| %>
          <li>
            <%= link_to item, class: "hover:text-purple-500" do %>
              <%= item.title %>
            <% end %>
          </li>
        <% end %>
      </ul>
    </section>

    <section>
      <%= link_to tags_path, class: "mb-4 font-bold inline-block" do %>
        <%= 'Author'.pluralize(@book.authors.count) %>
      <% end %>

      <ul class="space-y-1">
        <% @book.authors.each do |item| %>
          <li>
            <%= link_to item, class: "hover:text-orange-500" do %>
              <%= item.name %>
            <% end %>
          </li>
        <% end %>
      </ul>
    </section>

  </div>
</div>


<div class="px-5 md:px-10 lg:px-16 ">
  <h2 class="font-bold text-2xl mb-8 md:text-4xl xl:text-5xl">More books</h2>
  <div class="grid lg:grid-cols-4 gap-4 lg:gap-16">
    <%= render (BookCardComponent.with_collection(@more_books)) %>
  </div>
</div>

<% if current_user.try(:admin?) %>
  <div class="fixed bottom-10 z-50 right-10 flex gap-10">
    <%= link_to 'Edit', edit_book_path(@book) %>
    <%= button_to 'Delete', @book, method: :delete, style: 'background: tomato' %>
  </div>
<% end %>

