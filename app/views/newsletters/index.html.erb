<div class="flex 2xl:gap-20">

  <div class="mx-auto space-y-20 xl:w-4/5 px-5 sm:p-10">

    <% unless @featured.empty? %>
      <%= render(Layout::HeroComponent.new(title: "newsletter", bg_color: "from-emerald-700 via-emerald-600 to-yellow-500", bg: "newsletter")) do |c| %>

        <% @featured.each do |newsletter| %>
          <%= c.with_image do %>
            <%= image_tag("newsletter.png", srcset: { "newsletter@2x.png" => "2x"}, class: "lg:mx-auto self-center hover:rotate-12 transition-transform duration-300") %>
          <% end %>

          <%= c.with_link do %>
            <div class="lg:self-end">
              <%= link_to newsletter_path(newsletter), class: "text-3xl inline-block md:leading-tight md:text-4xl 2xl:text-5xl font-bold md:mb-4 hover:opacity-90" do %> 
                <%= newsletter.title %>
              <% end %>

              <div class="flex flex-wrap gap-2 mb-8 lg:mb-0 items-start justify-start ">
                <%= render ButtonComponent.new(title: "Details", path: newsletter_path(newsletter)) do %>
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-7 mt-1 w-7" viewBox="0 0 20 20" fill="currentColor"> <path d="M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z" /> </svg>
                <% end %>
              </div>
            </div>
          <% end %>
        <% end %>
      <% end %>
    <% end %>

    <%= render Layout::TwoColumnsComponent.new(title: "#{ @newsletters.count} newsletters about Ruby & Ruby on Rails") do |c| %>
      <%= c.with_data do %>
        <p>Learn about all the most interesting things in the Ruby and Ruby on Rails ecosystem: articles, news, gems, tutorials and more.</p>
      <% end %>
    <% end %>

    <div class="xl:hidden lg:w-2/3"> 
      <h2 class="text-3xl mb-4">Topics</h2>
      <div class="flex flex-wrap gap-2">
        <%= @tags.map { |t| link_to(t.title, t, class: "bg-slate-100 px-3 py-1 hover:bg-slate-50 inline-block hover:text-red-500") }.join(" ").html_safe %>
      </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 items-start xl:grid-cols-3 gap-4 md:gap-10 xl:gap-16">
      <%= render (NewsletterCardComponent.with_collection(@newsletters)) %>
    </div>

    </div>

    <div class="hidden xl:block w-1/5 py-10 px-8">
      <h2 class="text-3xl mb-8">Topics</h2>
      <div class="flex flex-wrap gap-2">
        <%= @tags.map { |t| link_to(t.title, t, class: "bg-slate-100 px-3 py-1 hover:bg-slate-50 inline-block hover:text-red-500") }.join(" ").html_safe %>
      </div>
    </div>

</div>


<% if current_user.try(:admin?) %>
  <%= link_to new_newsletter_path, class: "fixed bottom-10 right-10" do %>
    <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 fill-red-500" viewBox="0 0 20 20" fill="currentColor"> <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z" clip-rule="evenodd" /> </svg>
  <% end %>
<% end %>
